// _components/video-modal-by-follower.tsx
"use client";

import { Source } from "@/lib/types/strapi-autogenerated";
import { useCallback } from "react";
import { VideoModal } from "./video-modal";

interface Props {
  initialId: string;
  username: string;
  platform: string;
  initialSources: Source[];
  initialPrevId: string | null;
  initialNextId: string | null;
}

export function VideoModalByRecordings({
  initialId,
  username,
  platform,
  initialSources,
  initialPrevId,
  initialNextId,
}: Props) {
  const loadVideo = useCallback(async (id: string) => {
    const res = await fetch(
      `/api/recordings/with-prev-next?id=${id}&sort=createdAt:desc`
    );
    return res.json();
  }, []);

  return (
    <VideoModal
      initialId={initialId}
      username={username}
      platform={platform}
      initialSources={initialSources}
      initialPrevId={initialPrevId}
      initialNextId={initialNextId}
      onLoadVideo={loadVideo}
    />
  );
}
