import InfiniteFollowers from "@/app/(protected)/_components/infinite-followers";
import { getFollowers } from "@/app/actions/followers";
import { SortOptions } from "@/lib/types/filtering";

import { ScopeEnum } from "@/lib/types/strapi-autogenerated";

export default async function FollowingsPage() {
  const response = await getFollowers({
    scope: ScopeEnum.Following,
    page: 1,
    sort: SortOptions.UsernameAsc,
  });

  const data = response.data || [];
  const meta = response.meta;

  return (
    <section>
      {data.length === 0 ? (
        <p>You are not following anyone yet.</p>
      ) : (
        <InfiniteFollowers
          title="Followers"
          initialData={data}
          initialPagination={meta}
          initialSort={SortOptions.UsernameAsc}
          initialScope={ScopeEnum.Following}
        />
      )}
    </section>
  );
}
