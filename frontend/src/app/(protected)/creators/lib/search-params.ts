// lib/search-params.ts
import { SortOptions } from "@/lib/types/filtering";
import { ScopeEnum } from "@/lib/types/strapi-autogenerated";
import {
  createSearchParamsCache,
  parseAsBoolean,
  parseAsString,
  parseAsStringEnum,
} from "nuqs/server";

// lib/search-params.ts
export const discoverParsers = {
  sort: parseAsStringEnum<SortOptions>(Object.values(SortOptions)).withDefault(
    SortOptions.createdAtDesc
  ),
  hasRecordings: parseAsBoolean.withDefault(true),
  scope: parseAsStringEnum<ScopeEnum>(Object.values(ScopeEnum)).withDefault(
    ScopeEnum.Following
  ),
  gender: parseAsString,
  country: parseAsString,
  language: parseAsString,
  type: parseAsString,
  search: parseAsString,
  dateRange: parseAsString,
};

export const discoverParamsCache = createSearchParamsCache(discoverParsers);
