"use client";

import { ScopeEnum } from "@/lib/types/strapi-autogenerated";
import { Tabs } from "@mantine/core";
import { IconCompass, IconUsers } from "@tabler/icons-react";
import { useQueryStates } from "nuqs";
import { ReactNode } from "react";
import { discoverParsers } from "../lib/search-params";

interface Props {
  children: ReactNode;
}

export default function ScopeTabs({ children }: Props) {
  const [filters, setFilters] = useQueryStates(discoverParsers);

  return (
    <Tabs
      value={filters.scope}
      onChange={(value) => value && setFilters({ scope: value as ScopeEnum })}
      variant="outline"
      radius="md"
    >
      <Tabs.List mx={{ base: "-xs", sm: "-md" }}>
        <Tabs.Tab
          value="following"
          leftSection={<IconUsers size={16} />}
          fz="md"
          lts="0.02em"
          ml={{ base: "xs", sm: "md" }}
        >
          My Creators
        </Tabs.Tab>
        <Tabs.Tab
          value="discover"
          leftSection={<IconCompass size={16} />}
          fz="md"
          lts="0.02em"
        >
          Discover
        </Tabs.Tab>
      </Tabs.List>

      <Tabs.Panel value="following" pt={{ base: "xs", sm: "md" }}>
        {filters.scope === "following" && children}
      </Tabs.Panel>

      <Tabs.Panel value="discover" pt="md">
        {filters.scope === "discover" && children}
      </Tabs.Panel>
    </Tabs>
  );
}
