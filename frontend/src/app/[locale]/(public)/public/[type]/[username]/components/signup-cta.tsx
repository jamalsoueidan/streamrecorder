import { Recording } from "@/lib/types/strapi-autogenerated";
import { Box, Button, Stack, Text, Title } from "@mantine/core";
import { IconArrowRight } from "@tabler/icons-react";
import { getTranslations } from "next-intl/server";
import Image from "next/image";
import Link from "next/link";

interface SignupCtaProps {
  username: string;
  recordings: Recording[];
}

export async function SignupCta({ username, recordings }: SignupCtaProps) {
  const t = await getTranslations("profile");

  // Only show CTA if there are recordings
  if (recordings.length === 0) {
    return null;
  }

  return (
    <Box
      pos="relative"
      style={{
        aspectRatio: "16/9",
        overflow: "hidden",
        borderRadius: "var(--mantine-radius-md)",
      }}
    >
      {/* Background image */}
      <Image
        src="/desktop.png"
        alt=""
        fill
        style={{ objectFit: "cover" }}
      />

      {/* Content */}
      <Stack
        align="center"
        justify="center"
        gap="md"
        p="md"
        pos="relative"
        style={{
          height: "100%",
          zIndex: 1,
        }}
      >
        <Title order={3} ta="center">
          <span
            style={{
              background: "#000",
              padding: "2px 8px",
              boxDecorationBreak: "clone",
              WebkitBoxDecorationBreak: "clone",
            }}
          >
            {t("cta.title", { username })}
          </span>
        </Title>

        <Link href="/register">
          <Button
            size="md"
            radius="md"
            rightSection={<IconArrowRight size={18} />}
          >
            {t("cta.button")}
          </Button>
        </Link>
      </Stack>
    </Box>
  );
}
